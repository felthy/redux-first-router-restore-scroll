!(function(e, t) {
  'object' == typeof exports && 'object' == typeof module
    ? (module.exports = t())
    : 'function' == typeof define && define.amd
        ? define([], t)
        : 'object' == typeof exports
            ? (exports.ReduxFirstRouterRestoreScroll = t())
            : (e.ReduxFirstRouterRestoreScroll = t())
})(this, function() {
  return (function(e) {
    function t(o) {
      if (n[o]) return n[o].exports
      var i = (n[o] = { i: o, l: !1, exports: {} })
      return e[o].call(i.exports, i, i.exports, t), (i.l = !0), i.exports
    }
    var n = {}
    return (t.m = e), (t.c = n), (t.i = function(e) {
      return e
    }), (t.d = function(e, n, o) {
      t.o(e, n) ||
        Object.defineProperty(e, n, {
          configurable: !1,
          enumerable: !0,
          get: o
        })
    }), (t.n = function(e) {
      var n = e && e.__esModule
        ? function() {
            return e['default']
          }
        : function() {
            return e
          }
      return t.d(n, 'a', n), n
    }), (t.o = function(e, t) {
      return Object.prototype.hasOwnProperty.call(e, t)
    }), (t.p = ''), t((t.s = 3))
  })([
    function(e, t, n) {
      'use strict'
      function o(e) {
        function t(t, r) {
          var a = n.i(i.a)(t)
          if (r === undefined) return a ? a[e] : t[o]
          a ? a.scrollTo(a[e], r) : (t[o] = r)
        }
        var o = 'pageXOffset' === e ? 'scrollLeft' : 'scrollTop'
        return t
      }
      var i = n(7)
      t.a = o
    },
    function(e, t, n) {
      'use strict'
      function o(e, t) {
        if (!(e instanceof t))
          throw new TypeError('Cannot call a class as a function')
      }
      Object.defineProperty(t, '__esModule', { value: !0 })
      var i = (function() {
        function e(e, t) {
          for (var n = 0; t.length > n; n++) {
            var o = t[n]
            ;(o.enumerable =
              o.enumerable || !1), (o.configurable = !0), 'value' in o &&
              (o.writable = !0), Object.defineProperty(e, o.key, o)
          }
        }
        return function(t, n, o) {
          return n && e(t.prototype, n), o && e(t, o), t
        }
      })(),
        r = null
      t['default'] = (function() {
        function e() {
          o(this, e)
        }
        return i(e, [
          {
            key: 'setPrevKey',
            value: function(e) {
              r = e
            }
          },
          {
            key: 'read',
            value: function(e, t) {
              var n = this.getStateKey(e, t)
              try {
                var o = sessionStorage.getItem(n)
                return JSON.parse(o)
              } catch (i) {
                console.warn(i)
              }
            }
          },
          {
            key: 'save',
            value: function(e, t, n) {
              t && (e = { key: r, hash: e.hash })
              var o = this.getStateKey(e, t), i = JSON.stringify(n)
              try {
                sessionStorage.setItem(o, i)
              } catch (s) {
                console.warn(s)
              }
              if (t) {
                var a = e.key || e.hash || 'loadPage'
                a !== r && (r = a)
              }
            }
          },
          {
            key: 'getStateKey',
            value: function(e, t) {
              var n = e.key || e.hash || 'loadPage', o = '@@scroll|' + n
              return null == t ? o : o + '|' + t
            }
          }
        ]), e
      })()
    },
    function(e, t, n) {
      'use strict'
      Object.defineProperty(t, '__esModule', { value: !0 })
      var o = n(4),
        i = n(8),
        r = n(9),
        a = n(12),
        s = n.n(a),
        l = n(10),
        c = n.n(l),
        u = n(11)
      n.d(t, 'default', function() {
        return f
      })
      var d = 2,
        f = (function() {
          function e(e) {
            var t = this,
              a = e.addNavigationListener,
              s = e.stateStorage,
              l = e.getCurrentLocation,
              f = e.shouldUpdateScroll
            ;(this._setScrollRestoration = function() {
              if (
                !t._oldScrollRestoration &&
                'scrollRestoration' in window.history &&
                !n.i(u.a)()
              ) {
                t._oldScrollRestoration = window.history.scrollRestoration
                try {
                  window.history.scrollRestoration = 'manual'
                } catch (e) {
                  t._oldScrollRestoration = null
                }
              }
            }), (this._restoreScrollRestoration = function() {
              if (t._oldScrollRestoration) {
                try {
                  window.history.scrollRestoration = t._oldScrollRestoration
                } catch (e) {}
                t._oldScrollRestoration = null
              }
            }), (this._onWindowScroll = function() {
              if (
                !t._ignoreScrollEvents &&
                (t._saveWindowPositionHandle ||
                  (t._saveWindowPositionHandle = o.a(
                    t._saveWindowPosition
                  )), t._windowScrollTarget)
              ) {
                var e = t._windowScrollTarget,
                  a = e[0],
                  s = e[1],
                  l = n.i(i.a)(window),
                  c = n.i(r.a)(window)
                l === a &&
                  c === s &&
                  ((t._windowScrollTarget = null), t._cancelCheckWindowScroll())
              }
            }), (this._saveWindowPosition = function() {
              ;(t._saveWindowPositionHandle = null), t._savePosition(
                null,
                window
              )
            }), (this._checkWindowScrollPosition = function() {
              return (t._checkWindowScrollHandle = null), t._windowScrollTarget
                ? (t.scrollToTarget(
                    window,
                    t._windowScrollTarget
                  ), ++t._numWindowScrollAttempts, d >
                    t._numWindowScrollAttempts
                    ? new Promise(function(e) {
                        t._checkWindowScrollHandle = o.a(function() {
                          return e(t._checkWindowScrollPosition())
                        })
                      })
                    : ((t._windowScrollTarget = null), Promise.resolve()))
                : Promise.resolve()
            }), (this._stateStorage = s), (this._getCurrentLocation = l), (this._shouldUpdateScroll = f), (this._oldScrollRestoration = null), this._setScrollRestoration(), (this._saveWindowPositionHandle = null), (this._checkWindowScrollHandle = null), (this._windowScrollTarget = null), (this._numWindowScrollAttempts = 0), (this._ignoreScrollEvents = !1), (this._scrollElements = {
            }), window.addEventListener('scroll', this._onWindowScroll)
            var h = function(e) {
              o.b(
                t._saveWindowPositionHandle
              ), (t._saveWindowPositionHandle = null), e &&
                !t._ignoreScrollEvents &&
                t._saveWindowPosition(), Object.keys(
                t._scrollElements
              ).forEach(function(e) {
                var n = t._scrollElements[e]
                o.b(
                  n.savePositionHandle
                ), (n.savePositionHandle = null), t._ignoreScrollEvents || t._saveElementPosition(e)
              })
            }
            ;(this._removeNavigationListener = a(function(e) {
              h('POP' !== e.action)
            })), c.a.addEventListener('statechange', function(e) {
              var n = e.newState
              'terminated' === n || 'frozen' === n || 'discarded' === n
                ? (h(!0), t._restoreScrollRestoration())
                : t._setScrollRestoration()
            })
          }
          var t = e.prototype
          return (t.registerElement = function(e, t, n, i) {
            var r = this
            this._scrollElements[e] && s()(!1)
            var a = function() {
              r._saveElementPosition(e)
            },
              l = {
                element: t,
                shouldUpdateScroll: n,
                savePositionHandle: null,
                onScroll: function() {
                  l.savePositionHandle ||
                    r._ignoreScrollEvents ||
                    (l.savePositionHandle = o.a(a))
                }
              }
            l.savePositionHandle ||
              this._ignoreScrollEvents ||
              (l.savePositionHandle = o.a(a)), (this._scrollElements[
              e
            ] = l), t.addEventListener(
              'scroll',
              l.onScroll
            ), this._updateElementScroll(e, null, i)
          }), (t.unregisterElement = function(e) {
            this._scrollElements[e] || s()(!1)
            var t = this._scrollElements[e],
              n = t.element,
              i = t.onScroll,
              r = t.savePositionHandle
            n.removeEventListener('scroll', i), o.b(r), delete this
              ._scrollElements[e]
          }), (t.updateScroll = function(e, t) {
            var n = this
            this._updateWindowScroll(e, t).then(function() {
              n._saveWindowPositionHandle ||
                (n._saveWindowPositionHandle = o.a(n._saveWindowPosition))
            }), Object.keys(this._scrollElements).forEach(function(o) {
              n._updateElementScroll(o, e, t)
            })
          }), (t.stop = function() {
            this._restoreScrollRestoration(), window.removeEventListener(
              'scroll',
              this._onWindowScroll
            ), this._cancelCheckWindowScroll(), this._removeNavigationListener()
          }), (t.startIgnoringScrollEvents = function() {
            this._ignoreScrollEvents = !0
          }), (t.stopIgnoringScrollEvents = function() {
            this._ignoreScrollEvents = !1
          }), (t._cancelCheckWindowScroll = function() {
            o.b(
              this._checkWindowScrollHandle
            ), (this._checkWindowScrollHandle = null)
          }), (t._saveElementPosition = function(e) {
            var t = this._scrollElements[e]
            ;(t.savePositionHandle = null), this._savePosition(e, t.element)
          }), (t._savePosition = function(e, t) {
            this._stateStorage.save(this._getCurrentLocation(), e, [
              n.i(i.a)(t),
              n.i(r.a)(t)
            ])
          }), (t._updateWindowScroll = function(e, t) {
            return this._cancelCheckWindowScroll(), (this._windowScrollTarget = this._getScrollTarget(
              null,
              this._shouldUpdateScroll,
              e,
              t
            )), (this._numWindowScrollAttempts = 0), this._checkWindowScrollPosition()
          }), (t._updateElementScroll = function(e, t, n) {
            var o = this._scrollElements[e],
              i = o.element,
              r = o.shouldUpdateScroll,
              a = this._getScrollTarget(e, r, t, n)
            a && this.scrollToTarget(i, a)
          }), (t._getDefaultScrollTarget = function(e) {
            var t = e.hash
            return t && '#' !== t
              ? '#' === t.charAt(0) ? t.slice(1) : t
              : [0, 0]
          }), (t._getScrollTarget = function(e, t, n, o) {
            var i = !t || t.call(this, n, o)
            if (!i || Array.isArray(i) || 'string' == typeof i) return i
            var r = this._getCurrentLocation()
            return (
              this._getSavedScrollTarget(e, r) ||
              this._getDefaultScrollTarget(r)
            )
          }), (t._getSavedScrollTarget = function(e, t) {
            return 'PUSH' === t.action ? null : this._stateStorage.read(t, e)
          }), (t.scrollToTarget = function(e, t) {
            if ('string' == typeof t) {
              var o =
                document.getElementById(t) || document.getElementsByName(t)[0]
              if (o) return void o.scrollIntoView()
              t = [0, 0]
            }
            var a = t, s = a[0], l = a[1]
            n.i(i.a)(e, s), n.i(r.a)(e, l)
          }), e
        })()
    },
    function(e, t, n) {
      'use strict'
      function o(e) {
        return e && e.__esModule ? e : { default: e }
      }
      Object.defineProperty(t, '__esModule', { value: !0 })
      var i =
        Object.assign ||
        function(e) {
          for (var t = 1; arguments.length > t; t++) {
            var n = arguments[t]
            for (var o in n)
              Object.prototype.hasOwnProperty.call(n, o) && (e[o] = n[o])
          }
          return e
        },
        r = n(2),
        a = o(r),
        s = n(1),
        l = o(s)
      t['default'] = function() {
        var e = arguments.length > 0 && arguments[0] !== undefined
          ? arguments[0]
          : {},
          t = e.shouldUpdateScroll,
          n = e.manual,
          o = e.stateStorage
        return function(e) {
          if ('undefined' != typeof window) {
            var r = o || new l['default'](),
              s = new a['default']({
                addNavigationListener: e.listen,
                stateStorage: r,
                getCurrentLocation: function() {
                  return i({}, e.location, { action: e.action })
                },
                shouldUpdateScroll: t
              })
            return (s.setPrevKey = function() {
              r.setPrevKey(e.location.key || e.location.hash || 'loadPage')
            }), (s.manual = n), s
          }
        }
      }
    },
    function(e, t, n) {
      'use strict'
      function o(e) {
        var t = new Date().getTime(),
          n = Math.max(0, 16 - (t - r)),
          o = setTimeout(e, n)
        return (r = t), o
      }
      var i = n(5)
      n.d(t, 'b', function() {
        return u
      }), n.d(t, 'a', function() {
        return d
      })
      var r = new Date().getTime(),
        a = ['', 'webkit', 'moz', 'o', 'ms'],
        s = 'clearTimeout',
        l = o,
        c = function(e, t) {
          return (
            e + (e ? t[0].toUpperCase() + t.substr(1) : t) + 'AnimationFrame'
          )
        }
      i.a &&
        a.some(function(e) {
          var t = c(e, 'request')
          return t in window &&
            ((s = c(e, 'cancel')), (l = function(e) {
              return window[t](e)
            })), !!l
        })
      var u = function(e) {
        'function' == typeof window[s] && window[s](e)
      },
        d = l
    },
    function(e, t, n) {
      'use strict'
      t.a = !('undefined' == typeof window ||
        !window.document ||
        !window.document.createElement)
    },
    function(e, t, n) {
      'use strict'
      function o(e) {
        return 'nodeType' in e && e.nodeType === document.DOCUMENT_NODE
      }
      t.a = o
    },
    function(e, t, n) {
      'use strict'
      function o(e) {
        return 'window' in e && e.window === e
          ? e
          : !!n.i(i.a)(e) && (e.defaultView || !1)
      }
      var i = n(6)
      t.a = o
    },
    function(e, t, n) {
      'use strict'
      t.a = n.i(n(0).a)('pageXOffset')
    },
    function(e, t, n) {
      'use strict'
      t.a = n.i(n(0).a)('pageYOffset')
    },
    function(e, t, n) {
      /*!
 Copyright 2018 Google Inc. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
      /*! lifecycle.es5.js v0.1.1 */
      !(function(t, n) {
        e.exports = n()
      })(0, function() {
        'use strict'
        var e = void 0
        try {
          new EventTarget(), (e = !1)
        } catch (t) {
          e = !1
        }
        var t = 'function' == typeof Symbol &&
          'symbol' == typeof Symbol.iterator
          ? function(e) {
              return typeof e
            }
          : function(e) {
              return e &&
                'function' == typeof Symbol &&
                e.constructor === Symbol &&
                e !== Symbol.prototype
                ? 'symbol'
                : typeof e
            },
          n = function(e, t) {
            if (!(e instanceof t))
              throw new TypeError('Cannot call a class as a function')
          },
          o = (function() {
            function e(e, t) {
              for (var n = 0; t.length > n; n++) {
                var o = t[n]
                ;(o.enumerable =
                  o.enumerable || !1), (o.configurable = !0), 'value' in o &&
                  (o.writable = !0), Object.defineProperty(e, o.key, o)
              }
            }
            return function(t, n, o) {
              return n && e(t.prototype, n), o && e(t, o), t
            }
          })(),
          i = function(e, t) {
            if ('function' != typeof t && null !== t)
              throw new TypeError(
                'Super expression must either be null or a function, not ' +
                  typeof t
              )
            ;(e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0
              }
            })), t &&
              (Object.setPrototypeOf
                ? Object.setPrototypeOf(e, t)
                : (e.__proto__ = t))
          },
          r = function(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              )
            return !t || ('object' != typeof t && 'function' != typeof t)
              ? e
              : t
          },
          a = (function() {
            function e() {
              n(this, e), (this._registry = {})
            }
            return o(e, [
              {
                key: 'addEventListener',
                value: function(e, t) {
                  this._getRegistry(e).push(t)
                }
              },
              {
                key: 'removeEventListener',
                value: function(e, t) {
                  var n = this._getRegistry(e), o = n.indexOf(t)
                  o > -1 && n.splice(o, 1)
                }
              },
              {
                key: 'dispatchEvent',
                value: function(e) {
                  return (e.target = this), Object.freeze(e), this._getRegistry(
                    e.type
                  ).forEach(function(t) {
                    return t(e)
                  }), !0
                }
              },
              {
                key: '_getRegistry',
                value: function(e) {
                  return (this._registry[e] = this._registry[e] || [])
                }
              }
            ]), e
          })(),
          s = e ? EventTarget : a,
          l = e
            ? Event
            : function S(e) {
                n(this, S), (this.type = e)
              },
          c = (function(e) {
            function t(e, o) {
              n(this, t)
              var i = r(
                this,
                (t.__proto__ || Object.getPrototypeOf(t)).call(this, e)
              )
              return (i.newState = o.newState), (i.oldState =
                o.oldState), (i.originalEvent = o.originalEvent), i
            }
            return i(t, l), t
          })(),
          u = 'active',
          d = 'passive',
          f = 'hidden',
          h = 'frozen',
          v = 'terminated',
          _ =
            'object' ===
              ('undefined' == typeof safari ? 'undefined' : t(safari)) &&
            safari.pushNotification,
          g = [
            'focus',
            'blur',
            'visibilitychange',
            'freeze',
            'resume',
            'pageshow',
            'onpageshow' in self ? 'pagehide' : 'unload'
          ],
          w = function(e) {
            return e.preventDefault(), (e.returnValue = 'Are you sure?')
          },
          p = [
            [u, d, f, v],
            [u, d, f, h],
            [f, d, u],
            [h, f],
            [h, u],
            [h, d]
          ].map(function(e) {
            return e.reduce(function(e, t, n) {
              return (e[t] = n), e
            }, {})
          }),
          y = function() {
            return document.visibilityState === f
              ? f
              : document.hasFocus() ? u : d
          }
        return new ((function(e) {
          function t() {
            n(this, t)
            var e = r(
              this,
              (t.__proto__ || Object.getPrototypeOf(t)).call(this)
            ),
              o = y()
            return (e._state = o), (e._unsavedChanges = []), (e._handleEvents = e._handleEvents.bind(e)), g.forEach(
              function(t) {
                return addEventListener(t, e._handleEvents, !0)
              }
            ), _ &&
              addEventListener('beforeunload', function(t) {
                e._safariBeforeUnloadTimeout = setTimeout(function() {
                  t.defaultPrevented ||
                    t.returnValue.length > 0 ||
                    e._dispatchChangesIfNeeded(t, f)
                }, 0)
              }), e
          }
          return i(t, s), o(t, [
            {
              key: 'addUnsavedChanges',
              value: function(e) {
                !this._unsavedChanges.indexOf(e) > -1 &&
                  (0 === this._unsavedChanges.length &&
                    addEventListener(
                      'beforeunload',
                      w
                    ), this._unsavedChanges.push(e))
              }
            },
            {
              key: 'removeUnsavedChanges',
              value: function(e) {
                var t = this._unsavedChanges.indexOf(e)
                t > -1 &&
                  (this._unsavedChanges.splice(t, 1), 0 ===
                    this._unsavedChanges.length &&
                    removeEventListener('beforeunload', w))
              }
            },
            {
              key: '_dispatchChangesIfNeeded',
              value: function(e, t) {
                if (t !== this._state)
                  for (
                    var n = (function(e, t) {
                      for (var n, o = 0; (n = p[o]); ++o) {
                        var i = n[e], r = n[t]
                        if (i >= 0 && r >= 0 && r > i)
                          return Object.keys(n).slice(i, r + 1)
                      }
                      return []
                    })(this._state, t),
                      o = 0;
                    n.length - 1 > o;
                    ++o
                  ) {
                    var i = n[o], r = n[o + 1]
                    ;(this._state = r), this.dispatchEvent(
                      new c('statechange', {
                        oldState: i,
                        newState: r,
                        originalEvent: e
                      })
                    )
                  }
              }
            },
            {
              key: '_handleEvents',
              value: function(e) {
                switch ((_ &&
                  clearTimeout(this._safariBeforeUnloadTimeout), e.type)) {
                  case 'pageshow':
                  case 'resume':
                    this._dispatchChangesIfNeeded(e, y())
                    break
                  case 'focus':
                    this._dispatchChangesIfNeeded(e, u)
                    break
                  case 'blur':
                    this._state === u && this._dispatchChangesIfNeeded(e, y())
                    break
                  case 'pagehide':
                  case 'unload':
                    this._dispatchChangesIfNeeded(e, e.persisted ? h : v)
                    break
                  case 'visibilitychange':
                    this._state !== h &&
                      this._state !== v &&
                      this._dispatchChangesIfNeeded(e, y())
                    break
                  case 'freeze':
                    this._dispatchChangesIfNeeded(e, h)
                }
              }
            },
            {
              key: 'state',
              get: function() {
                return this._state
              }
            },
            {
              key: 'pageWasDiscarded',
              get: function() {
                return document.wasDiscarded || !1
              }
            }
          ]), t
        })())()
      })
    },
    function(e, t, n) {
      'use strict'
      function o() {
        return (
          /iPad|iPhone|iPod/.test(window.navigator.platform) &&
          /^((?!CriOS).)*Safari/.test(window.navigator.userAgent)
        )
      }
      t.a = o
    },
    function(e, t, n) {
      'use strict'
      e.exports = function(e, t, n, o, i, r, a, s) {
        if (!e) {
          var l
          if (t === undefined)
            l = Error(
              'Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.'
            )
          else {
            var c = [n, o, i, r, a, s], u = 0
            ;(l = Error(
              t.replace(/%s/g, function() {
                return c[u++]
              })
            )), (l.name = 'Invariant Violation')
          }
          throw ((l.framesToPop = 1), l)
        }
      }
    }
  ])
})
